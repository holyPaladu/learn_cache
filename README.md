# Project Documentation

## Описание

Этот проект представляет собой серверное приложение, построенное с использованием фреймворка [NestJS](https://nestjs.com/). Приложение включает в себя работу с базой данных PostgreSQL и кэширование с использованием Redis.

## Запуск проекта

Для запуска проекта используйте Docker Compose. Это поднимет все необходимые сервисы, включая базу данных PostgreSQL и Redis.

```bash
docker-compose up
```

## Структура проекта

Проект организован по модулям, что позволяет легко управлять и масштабировать приложение. Основной модуль включает:

### Модуль Пользователей (UsersModule)

Этот модуль отвечает за управление пользователями. Он включает в себя контроллеры для обработки HTTP-запросов, сервисы для бизнес-логики и репозитории для взаимодействия с базой данных.

#### Контроллер Пользователей (UsersController)

Контроллер обрабатывает HTTP-запросы, связанные с пользователями. Основные маршруты включают:

- `GET /users/cache/memory` - Получить размер кэша.
- `GET /users/all` - Получить всех пользователей.
- `GET /users/all/test/ids` - Получить тестовые идентификаторы пользователей.
- `POST /users` - Создать нового пользователя.

#### Сервис Пользователей (UsersService)

Сервис содержит бизнес-логику для управления пользователями. Основные методы включают:

- `checkCacheSize` - Проверить размер кэша.
- `getAllUsers` - Получить всех пользователей.
- `getAllUsersTest` - Получить тестовые идентификаторы пользователей.
- `createUser` - Создать нового пользователя.

## Конфигурация

### Переменные окружения

Проект использует следующие переменные окружения, которые можно задать в файле `.env`:

- `DATABASE_HOST` - хост базы данных PostgreSQL
- `DATABASE_PORT` - порт базы данных PostgreSQL
- `DATABASE_USER` - пользователь базы данных PostgreSQL
- `DATABASE_PASSWORD` - пароль базы данных PostgreSQL
- `DATABASE_NAME` - имя базы данных PostgreSQL
- `REDIS_HOST` - хост Redis
- `REDIS_PORT` - порт Redis

### Конфигурация базы данных

Конфигурация базы данных находится в файле `src/config/database.config.ts`.

### Кэширование

Проект использует кэширование с помощью Redis. Конфигурация кэширования находится в файле `src/app.module.ts`.

## API

### Пользователи

#### Получить всех пользователей

```http
GET /users/all
```

#### Создать пользователя

```http
POST /users
```

Тело запроса:

```json
{
  "name": "John Doe",
  "email": "johndoe@example.com"
}
```

#### Обновить пользователя

```http
PUT /users/:id
```

Тело запроса:

```json
{
  "name": "John Doe",
  "email": "johndoe@example.com"
}
```

## Тестирование

### Юнит-тесты

Для запуска юнит-тестов используйте команду:

```bash
npm run test
```

### E2E-тесты

Для запуска E2E-тестов используйте команду:

```bash
npm run test:e2e
```

### Покрытие тестами

Для проверки покрытия тестами используйте команду:

```bash
npm run test:cov
```

## Лицензия

Этот проект лицензирован под UNLICENSED.

## Автор

Автор проекта: holyPaladu

## Поддержка

Если у вас есть вопросы или нужна поддержка, пожалуйста, создайте issue в репозитории проекта.
